<body>
<canvas id='canvas' height='768' width='1024' ></canvas>
<script>
var canvas=document.getElementById('canvas')
  , context=canvas.getContext('2d')


function drawLine(line) {
	context.beginPath()
	context.moveTo(line.translationVector.x,line.translationVector.y)
	context.lineTo(line.translatedSegmentVector.x,line.translatedSegmentVector.y)
	context.stroke()
}

function clear() {
	context.clearRect(0,0,canvas.width,canvas.height)
}

function Vector(x,y) {
	this.x = x
	this.y = y

	Object.defineProperties(this, {
		'rotationInRadians':  {
			get : function () { return Math.atan2(this.y, this.x) }
		},
		'rotationInDegrees': {
			get : function () { return this.rotationInRadians / Math.PI * 180 }
		},
		'magnitude' : {
			get : function () { return Math.sqrt(Math.pow(this.x,2), Math.pow(this.y,2) )}
		}
	})
}

Vector.prototype.multiply = function(scaleFactor) {
	return new Vector(this.x*scaleFactor, this.y*scaleFactor)
} 

Vector.prototype.add = function(vector) {
	return new Vector(this.x + vector.x,this.y + vector.y )
}

Vector.prototype.rotate = function(degrees) {
	var newRotationInDegrees = this.rotationInDegrees + degrees
	console.log(newRotationInDegrees)
	var newRotationInRadians = newRotationInDegrees * Math.PI / 180

	var x = Math.sin(newRotationInRadians) * this.magnitude
	var y = Math.cos(newRotationInRadians) * this.magnitude

	return new Vector(x,y)
}

function Line(translationVector, segmentVector) {
	this.translationVector = translationVector
	this.segmentVector = segmentVector
	Object.defineProperty(this, 'translatedSegmentVector', {
		get : function () { return this.translationVector.add(this.segmentVector) }
	})
	this.clone = function () {
		return new Line(new Vector(translationVector.x,translationVector.y), new Vector(segmentVector.x, segmentVector.y))
	}
}

var lines = []

lines.push(new Line(new Vector(0,0), new Vector(100,0)))

// drawLine(lines[0])
// lines[0].translationVector = lines[0].translationVector.rotate(-45)
// drawLine(lines[0])

x = 0

function animationLoop() {

	clear()
	lines.forEach(function (line) {
		var clone = line.clone()
		//clone.translationVector = clone.translationVector.rotate(x+=1)
		clone.segmentVector = clone.segmentVector.rotate(x+=1)

		drawLine(clone)
		// line.translationVector = line.translationVector.add(new Vector(1,0))

	})


	requestAnimationFrame(animationLoop)
}

requestAnimationFrame(animationLoop)


</script>
</body>
